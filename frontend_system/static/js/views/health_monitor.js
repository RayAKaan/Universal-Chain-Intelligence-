class HealthMonitorView{constructor(app){this.app=app;this.ch=new SimpleChart()}async mount(){const [h,r]=await Promise.all([this.app.api.get('/health/phases'),this.app.api.get('/health/resources')]);this.app.view.innerHTML=`<div class='view-grid cols-4'>${Object.entries(h.phases||{}).map(([k,v])=>UIComponents.metricCard(k,Math.round((v.score||0)*100)+'%')).join('')}</div><section class='card' style='margin-top:14px'><div class='card-body'><div id='res-bars'></div><div id='res-line' class='chart-wrap'></div></div></section>`;this.ch.barChart(document.getElementById('res-bars'),[{label:'CPU',value:r.resources?.cpu||0},{label:'Memory',value:r.resources?.memory||0},{label:'Disk',value:r.resources?.disk||0}]);const series=Array.from({length:60},(_,i)=>({x:i,value:Math.max(5,Math.min(95,(r.resources?.cpu||30)+(Math.random()*20-10)))}));this.ch.lineChart(document.getElementById('res-line'),series)}} window.HealthMonitorView=HealthMonitorView;
