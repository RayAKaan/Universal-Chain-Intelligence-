class SystemConsoleView{constructor(app){this.app=app;this.hist=[];this.hi=0;this.commands=['status','goals','goal ','capabilities','health','improvements','safety','ask ','autonomy ','help','clear']}async mount(){this.app.view.innerHTML=`<section class='card'><div class='card-header'><div class='card-title'>System Console</div><div><span class='status-dot healthy'></span> connected</div></div><div class='card-body'><div id='term' class='terminal'>UCI v1.0.0
Type 'help' for available commands
</div><div style='display:flex;gap:8px;margin-top:10px'><span>uci&gt;</span><input id='cmd' class='input'/><button class='btn btn-primary' id='run'>Run</button></div></div></section>`;const cmd=document.getElementById('cmd'),term=document.getElementById('term');const run=async()=>{const c=cmd.value.trim();if(!c)return;this.hist.push(c);this.hi=this.hist.length;if(c==='clear'){term.textContent='';cmd.value='';return}const r=await this.app.api.execute(c);term.textContent+=`uci> ${c}
${r.output}
`;cmd.value='';term.scrollTop=term.scrollHeight};document.getElementById('run').onclick=run;cmd.addEventListener('keydown',e=>{if(e.key==='Enter')run();if(e.key==='ArrowUp'){this.hi=Math.max(0,this.hi-1);cmd.value=this.hist[this.hi]||''}if(e.key==='ArrowDown'){this.hi=Math.min(this.hist.length,this.hi+1);cmd.value=this.hist[this.hi]||''}if(e.key==='Tab'){e.preventDefault();const m=this.commands.find(x=>x.startsWith(cmd.value));if(m)cmd.value=m}})}} window.SystemConsoleView=SystemConsoleView;
