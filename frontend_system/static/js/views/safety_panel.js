class SafetyPanelView{constructor(app){this.app=app;this.ch=new SimpleChart()}async mount(){const [s,a,t]=await Promise.all([this.app.api.getSafetyStatus(),this.app.api.getAuditTrail(40,0),this.app.api.getTrust()]);this.app.view.innerHTML=`<div class='view-grid cols-4'>${UIComponents.metricCard('Alignment',Math.round((s.alignment||0)*100)+'%')}${UIComponents.metricCard('Trust Tier',t.tier||'N/A')}${UIComponents.metricCard('Containment',s.containment||'N/A')}${UIComponents.metricCard('Violations','0')}</div><div class='view-grid cols-2' style='margin-top:14px'><section class='card'><div class='card-header'><div class='card-title'>Constitutional Principles</div></div><div class='card-body'>${Array.from({length:15},(_,i)=>`<details><summary>Principle ${i+1}</summary><p>Operational safeguard and human-first constitutional guarantee.</p></details>`).join('')}</div></section><section class='card'><div class='card-header'><div class='card-title'>Audit Trail</div></div><div class='card-body'><div id='audit-table'></div></div></section></div><section class='card' style='margin-top:14px'><div class='card-body'><button class='btn btn-danger' id='panic'>ACTIVATE PANIC MODE</button></div></section>`;document.getElementById('audit-table').innerHTML=UIComponents.table(['Seq','Action','Outcome'],(a.audit||[]).map(x=>[x.seq,x.action,UIComponents.statusBadge(x.outcome)]));document.getElementById('panic').onclick=()=>UIComponents.confirmDialog('Type CONFIRM in next prompt to panic?',async()=>{const v=prompt('Type CONFIRM');if(v==='CONFIRM'){await this.app.api.panic('manual');UIComponents.toast('Panic mode activated','error')}})}}} window.SafetyPanelView=SafetyPanelView;
