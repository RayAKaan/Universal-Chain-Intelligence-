class PlanViewerView{constructor(app){this.app=app;this.g=new NeuralGraph()}async mount(){const p=await this.app.api.getPlans();const plans=p.plans||[];this.app.view.innerHTML=`<section class='card'><div class='card-header'><div class='card-title'>Strategic Map</div></div><div class='card-body'>${plans.map(x=>`<button class='btn chip' data-plan='${x.id}'>${x.name}</button>`).join(' ')}</div></section><section class='card' style='margin-top:14px'><div class='card-body'><div id='plan-graph'></div></div></section>`;const show=async(id)=>{const g=await this.app.api.getPlanGraph(id);this.g.render(document.getElementById('plan-graph'),g)};if(plans[0])show(plans[0].id);this.app.view.querySelectorAll('[data-plan]').forEach(b=>b.onclick=()=>show(b.dataset.plan))}} window.PlanViewerView=PlanViewerView;
